<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>About Us - Webora – Web Development Agency</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css_styles.css">
  <style>
    /* Update value cards to vertical layout */
    .value-card {
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--border-radius);
      padding: var(--spacing-lg);
      text-align: center;
      transition: transform 0.4s ease, box-shadow 0.4s ease;
      height: 100%;
      box-shadow: var(--shadow-subtle);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .value-card:hover {
      transform: translateY(-15px);
      box-shadow: 0 12px 36px rgba(0, 0, 0, 0.1);
    }
    
    .value-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto var(--spacing-md);
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--glass-highlight);
      border-radius: 50%;
      transition: transform 0.4s ease, background-color 0.4s ease, box-shadow 0.4s ease;
    }
    
    .value-card:hover .value-icon {
      transform: scale(1.1);
      background-color: rgba(0, 0, 0, 0.08);
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    }
    
    .value-card .icon-svg {
      width: 40px;
      height: 40px;
    }
    
    /* For dark mode */
    [data-theme="dark"] .value-card:hover .value-icon {
      background: rgba(255, 255, 255, 0.25);
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.15);
    }

    /* For screen readers only */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }

    /* Full width sections */
    .full-width {
      width: 100vw;
      margin-left: calc(50% - 50vw);
      padding-left: var(--spacing-xl);
      padding-right: var(--spacing-xl);
    }

    /* Improved bullet point alignment */
    .about-list {
      text-align: left;
      padding-left: 0;
      list-style-type: none; /* Remove default bullets */
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .about-list li {
      position: relative;
      padding-left: 30px;
      margin-bottom: var(--spacing-sm);
      text-align: justify; /* Justify text in about list items */
      text-justify: inter-word;
      line-height: 1.6;
    }
    
    .about-list li::before {
      content: "•"; /* Single bullet */
      position: absolute;
      left: 0;
      top: 0;
      color: var(--text-primary);
      font-size: 1.5rem;
      line-height: 1;
    }
    
    /* Container for value grid that preserves original width */
    .value-grid-container {
      max-width: 1200px;
      width: 95%;
      margin: 0 auto;
    }
    
    /* Adjust value grid for vertical layout */
    .value-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--spacing-lg);
      margin: var(--spacing-lg) auto;
    }
    
    /* Logo styling */
    .logo {
      display: flex;
      align-items: center;
      gap: 10px; /* Space between logo image and text */
    }
    
    .logo-img {
      width: 80px;
      height: 80px;
      border-radius: 8px;
    }
    
    /* Enhanced theme toggle and home button styling with border in dark mode */
    [data-theme="dark"] .theme-toggle,
    [data-theme="dark"] .home-btn {
      border: 2px solid rgba(255, 255, 255, 0.3); /* Light border in dark mode */
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.1); /* Subtle glow in dark mode */
    }
    
    /* Home button hover effect in dark mode */
    [data-theme="dark"] .home-btn:hover {
      border-color: rgba(255, 255, 255, 0.5); /* Brighter border on hover */
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.2); /* Enhanced glow on hover */
    }
    
    /* About Section - Contained width, not full width */
    .about-section {
      padding: 4rem 0; /* Increased vertical padding */
    }
    .about-content.fade-in.contained-width {
      width: 100%;
      max-width: 1600px; /* Increased from 1400px */
      margin: 0 auto;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--border-radius);
      padding: 4rem 3rem; /* Increased horizontal padding */
      box-shadow: var(--shadow-subtle);
      text-align: center;
    }
    /* Mission and Values Section */
    .mission-values .container {
      width: 100%;
      max-width: 1600px; /* Increased from 1400px */
      margin: 0 auto;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--border-radius);
      padding: 4rem 3rem; /* Increased horizontal padding */
      box-shadow: var(--shadow-subtle);
    }
    
    /* Team Section */
    .team-section {
      padding: 4rem 0; /* Increased vertical padding */
    }
    .team-intro.contained-width {
      width: 100%;
      max-width: 1600px; /* Increased from 1400px */
      margin: 0 auto var(--spacing-xl);
      text-align: center;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: var(--border-radius);
      padding: 4rem 3rem; /* Increased horizontal padding */
      box-shadow: var(--shadow-subtle);
    }
    
    @media (max-width: 1200px) {
      .about-content.fade-in.contained-width,
      .mission-values .container,
      .team-intro.contained-width {
        max-width: 98vw;
        padding: 2.5rem 1.2rem;
      }
    }
    @media (max-width: 768px) {
      .about-content.fade-in.contained-width,
      .mission-values .container,
      .team-intro.contained-width {
        max-width: 100vw;
        padding: 1.2rem 0.5rem;
      }
    }
    </style>
</head>
<body>
  <!-- Network Animation Background -->
  <div id="network-background" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -10; pointer-events: none; opacity: 0.4;">
    <canvas id="network-canvas" style="width: 100%; height: 100%; background: transparent;"></canvas>
  </div>

  <div class="page-wrapper">
    <!-- Header with Full-screen Takeover -->
    <header id="header">
      <div class="header-container">
        <a href="index.html" class="logo" style="gap: 20px;">
          <!-- Updated logo with fixed dimensions -->
          <img src="images/weboralogo.svg" alt="Webora Logo" class="logo-img" style="width: 80px; height: 80px; min-width: 80px; min-height: 80px;">
          Webora
        </a>
        
        <div class="header-right">
          <a href="index.html" class="header-btn">Home</a>
          <a href="about.html" class="header-btn">About Us</a>
          <a href="process.html" class="header-btn">Our Process</a>
          <a href="work.html" class="header-btn">Projects</a>
          <button class="menu-toggle" id="menuToggle" aria-label="Toggle navigation menu">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
      </div>
      
      <!-- Full-screen Navigation -->
      <nav class="full-nav" id="fullNav">
        <a href="index.html">Home</a>
        <a href="about.html">About Us</a>
        <a href="process.html">Our Process</a>
        <a href="work.html">Projects</a>
        <a href="index.html#contact">Contact</a>
      </nav>
    </header>

    <!-- Page Header with White Background - Full width for background but contained content -->
    <div class="page-header full-width">
      <div class="page-header-content fade-in contained-width">
        <h1>About Webora</h1>
        <p class="lead" style="text-align: center;">We build digital experiences that help businesses thrive in the modern world</p>
      </div>
    </div>

    <!-- About Section - Contained width, not full width -->
    <section class="about-section">
      <div class="about-content fade-in contained-width">
        <h2>Dubai's Premier Web Development Agency</h2>
        <p>Founded in 2020, Webora is a Dubai-based creative web development agency focused on helping businesses establish a powerful online presence. We combine technical expertise with creative design to deliver websites that not only look stunning but also perform exceptionally well.</p>
        <p>Our team of passionate developers, designers, and digital strategists work together to craft bespoke digital solutions that help our clients stand out in an increasingly competitive online landscape.</p>
        
        <h3>How We Help Businesses Grow</h3>
        <ul class="about-list">
          <li>Building brand-aligned websites that reflect your company's unique identity</li>
          <li>Developing optimized e-commerce platforms that drive sales and conversions</li>
          <li>Creating responsive designs that provide seamless experiences across all devices</li>
          <li>Implementing SEO strategies that improve your search engine visibility</li>
          <li>Providing ongoing support to ensure your digital presence remains current</li>
        </ul>
        
        <!-- Contact button with more spacing -->
        <div style="margin-top: 3rem;">
          <a href="index.html#contact" class="btn btn-primary">Contact Us</a>
        </div>
      </div>
    </section>
    
    <!-- Mission and Values Section with vertical cards - Reduced top spacing -->
    <section class="mission-values" style="padding-top: 2rem;"> <!-- Added reduced top padding -->
      <div class="container">
        <h2 class="text-center fade-in">Our Values</h2>
        <p class="lead text-center fade-in delay-1" style="text-align: center;">Principles that guide our work and define our approach</p>
        
        <div class="value-grid">
          <!-- Value Card 1 - Now vertical -->
          <div class="value-card glass fade-in">
            <div class="value-icon">
              <svg class="icon-svg" viewBox="0 0 24 24">
                <path d="M12 1v8l-2-2-2 2V1H5v22h14V1h-7z"></path>
              </svg>
            </div>
            <h3>Excellence</h3>
            <p>We pursue excellence in every aspect of our work, from design and development to client communication and project management.</p>
          </div>
          
          <!-- Value Card 2 - Now vertical -->
          <div class="value-card glass fade-in delay-1">
            <div class="value-icon">
              <svg class="icon-svg" viewBox="0 0 24 24">
                <path d="M12 2C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zM9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm1-4h4v-1.26c1.81-1.27 3-3.36 3-5.74 0-2.76-2.24-5-5-5S7 7.24 7 10c0 2.38 1.19 4.47 3 5.74V17z"/>
              </svg>
            </div>
            <h3>Innovation</h3>
            <p>We embrace new technologies and creative approaches to solve complex problems and deliver cutting-edge solutions.</p>
          </div>
          
          <!-- Value Card 3 - Now vertical -->
          <div class="value-card glass fade-in delay-2">
            <div class="value-icon">
              <svg class="icon-svg" viewBox="0 0 24 24">
                <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"></path>
              </svg>
            </div>
            <h3>Client-Centered</h3>
            <p>We put our clients at the center of everything we do, focusing on their unique needs and goals to deliver tailored solutions.</p>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Team Section - Contained width - reduced top padding -->
    <section class="team-section" style="padding-top: 2rem;"> <!-- Reduced from var(--spacing-xl) to 2rem -->
      <div class="team-intro contained-width">
        <h2 class="text-center fade-in">Why Choose Webora</h2>
        <p class="lead fade-in delay-1" style="text-align: center;">Based in Dubai and serving clients worldwide, we understand the unique digital landscape of the UAE and the broader Middle East. Here's why businesses trust us with their digital presence:</p>
        
        <ul class="about-list fade-in delay-2">
          <li>Deep understanding of the UAE's business environment and digital ecosystem</li>
          <!-- Removed the second bullet point about multilingual team -->
          <li>Compliance with local data protection regulations and standards</li>
          <li>Experience working with businesses across various industries in Dubai</li>
          <li>Knowledge of regional SEO practices and search behaviors</li>
          <li>Connections with local hosting providers and technology partners</li>
          <li>Cultural sensitivity in design and content development</li>
          <li>Strategic approach tailored to the competitive UAE marketplace</li>
        </ul>
        
        <div class="text-center fade-in delay-2" style="margin-top: 3rem;">
          <a href="index.html#contact" class="btn btn-primary">Contact Us</a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="glass" id="info">
      <div class="container">
        <div class="footer-content">
          <div class="footer-logo">
            <div class="logo-text">Webora</div>
            <p class="tagline">Creating exceptional digital experiences</p>
          </div>
          
          <div class="footer-links">
            <div class="footer-nav">
              <h4>Navigation</h4>
              <a href="index.html">Home</a>
              <a href="about.html">About Us</a>
              <a href="process.html">Our Process</a>
              <a href="work.html">Our Work</a>
              <a href="index.html#contact">Contact</a>
            </div>
            
            <div class="footer-legal">
              <h4>Legal</h4>
              <a href="terms.html">Terms of Service</a>
              <a href="privacy.html">Privacy Policy</a>
              <a href="cookies.html">Cookie Policy</a>
            </div>
          </div>
        </div>
        
        <div class="footer-bottom">
          <p>&copy; <span id="currentYear"></span> Webora. All rights reserved.</p>
        </div>
      </div>
    </footer>
  </div>
  
  <!-- Theme toggle - updated to vertical toggle -->
  <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode">
    <div class="toggle-knob">
      <!-- Moon icon (shown in light mode) -->
      <svg class="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"/>
      </svg>
      
      <!-- Sun icon (shown in dark mode) -->
      <svg class="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>
      </svg>
    </div>
  </button>
  
  <!-- Home Button -->
  <a href="index.html" class="home-btn" title="Home" aria-label="Back to Home">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    </svg>
  </a>

  <!-- For screen readers to announce theme changes -->
  <div id="themeAnnounce" class="sr-only" aria-live="polite"></div>

  <!-- Load JS scripts - FIXED: removed duplicate script references -->
  <script src="js_scripts.js"></script>
  <script src="debug-logo.js"></script>
  
  <!-- Direct Network Animation Script -->
  <script>
    // Optimized network animation with enhanced visibility and scroll-reactive vertical movement
    (function() {
      const canvas = document.getElementById('network-canvas');
      if (!canvas) return;
      
      const ctx = canvas.getContext('2d');
      const particles = [];
      let animationId;
      let mouseX = 0;
      let mouseY = 0;
      let isVisible = true;
      let lastFrameTime = 0;
      let lastScrollY = 0;
      let scrollVelocity = 0;
      const targetFPS = 60;
      const frameInterval = 1000 / targetFPS;
      
      // Viewport bounds for culling with buffer
      const CULL_BUFFER = 100;
      let viewportBounds = {
        left: -CULL_BUFFER,
        right: window.innerWidth + CULL_BUFFER,
        top: -CULL_BUFFER,
        bottom: window.innerHeight + CULL_BUFFER
      };
      
      // Performance monitoring
      let frameCount = 0;
      let lastPerformanceCheck = Date.now();
      
      // Smooth interpolation function
      function lerp(start, end, factor) {
        return start + (end - start) * factor;
      }
      
      // Check if particle is within viewport bounds
      function isParticleVisible(particle) {
        return particle.x >= viewportBounds.left && 
               particle.x <= viewportBounds.right && 
               particle.y >= viewportBounds.top && 
               particle.y <= viewportBounds.bottom;
      }
      
      // Set canvas size with optimization
      function resizeCanvas() {
        const dpr = Math.min(window.devicePixelRatio || 1, 2);
        canvas.width = window.innerWidth * dpr;
        canvas.height = window.innerHeight * dpr;
        canvas.style.width = window.innerWidth + 'px';
        canvas.style.height = window.innerHeight + 'px';
        ctx.scale(dpr, dpr);
        
        // Update viewport bounds
        viewportBounds = {
          left: -CULL_BUFFER,
          right: window.innerWidth + CULL_BUFFER,
          top: -CULL_BUFFER,
          bottom: window.innerHeight + CULL_BUFFER
        };
        
        canvas.style.position = 'fixed';
        canvas.style.top = '0';
        canvas.style.left = '0';
        canvas.style.zIndex = '-2';
        canvas.style.pointerEvents = 'none';
      }
      
      // Optimized particle creation
      function createParticles() {
        particles.length = 0;
        const baseCount = Math.min(90, Math.floor((window.innerWidth * window.innerHeight) / 18000));
        const connectedParticleCount = Math.max(45, baseCount);
        const unconnectedParticleCount = Math.floor(connectedParticleCount * 0.15);
        const totalParticleCount = connectedParticleCount + unconnectedParticleCount;
        
        for (let i = 0; i < totalParticleCount; i++) {
          const centerX = window.innerWidth / 2;
          const centerY = window.innerHeight / 2;
          const bias = 0.2;
          
          let x = Math.random() * window.innerWidth;
          let y = Math.random() * window.innerHeight;
          
          x = x + (centerX - x) * bias * Math.random();
          y = y + (centerY - y) * bias * Math.random();
          
          particles.push({
            x: x,
            y: y,
            targetX: x,
            targetY: y,
            vx: (Math.random() - 0.5) * 0.15,
            vy: (Math.random() - 0.5) * 0.15,
            radius: Math.random() * 1.8 + 0.8,
            originalRadius: Math.random() * 1.8 + 0.8,
            pulse: Math.random() * Math.PI * 2,
            pulseSpeed: 0.008 + Math.random() * 0.008,
            glowIntensity: Math.random() * 0.4 + 0.4,
            isGlowing: Math.random() > 0.7,
            isConnected: i < connectedParticleCount,
            scrollSensitivity: 0.4 + Math.random() * 0.6,
            verticalOffset: 0,
            isVisible: true,
            lastVisible: true
          });
        }
      }
      
      // Cached colors with enhanced visibility
      let cachedColors = null;
      let lastTheme = null;
      
      function getColors() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        if (cachedColors && lastTheme === currentTheme) {
          return cachedColors;
        }
        
        const isDark = currentTheme === 'dark';
        cachedColors = {
          particle: isDark ? 'rgba(255, 255, 255, 1.0)' : 'rgba(0, 0, 0, 0.9)', // Black particles in light mode
          particleGlow: isDark ? 'rgba(255, 255, 255, 0.9)' : 'rgba(0, 0, 0, 0.8)', // Black glow in light mode
          line: isDark ? 'rgba(255, 255, 255, 0.35)' : 'rgba(0, 0, 0, 0.3)', // Black lines in light mode
          lineGlow: isDark ? 'rgba(255, 255, 255, 0.5)' : 'rgba(0, 0, 0, 0.35)' // Black line glow in light mode
        };
        lastTheme = currentTheme;
        return cachedColors;
      }
      
      // Handle scroll events with velocity calculation and vertical movement
      function handleScroll() {
        const currentScrollY = window.pageYOffset;
        const scrollDelta = currentScrollY - lastScrollY;
        
        scrollVelocity = lerp(scrollVelocity, scrollDelta * 0.1, 0.1);
        
        particles.forEach(particle => {
          const scrollEffect = scrollDelta * particle.scrollSensitivity * 0.08;
          
          particle.targetX += scrollEffect * (Math.random() - 0.5);
          
          const verticalScrollEffect = scrollVelocity * particle.scrollSensitivity * 2;
          particle.targetY += verticalScrollEffect;
          particle.verticalOffset += verticalScrollEffect * 0.5;
          
          const extendedWidth = window.innerWidth + 200;
          const extendedHeight = window.innerHeight + 200;
          
          if (particle.targetX < -100) particle.targetX = extendedWidth;
          if (particle.targetX > extendedWidth) particle.targetX = -100;
          if (particle.targetY < -100) particle.targetY = extendedHeight;
          if (particle.targetY > extendedHeight) particle.targetY = -100;
        });
        
        lastScrollY = currentScrollY;
      }
      
      // New function to drift particles back to viewport when scrolling stops
      function driftToViewport() {
        particles.forEach(particle => {
          const centerX = window.innerWidth / 2;
          const centerY = window.innerHeight / 2;
          
          const dx = centerX - particle.targetX;
          const dy = centerY - particle.targetY;
          const distance = Math.sqrt(dx * dx + dy * dy);
          
          if (distance > window.innerWidth * 0.3) {
            const driftStrength = 0.002;
            particle.targetX += dx * driftStrength * particle.scrollSensitivity;
            particle.targetY += dy * driftStrength * particle.scrollSensitivity;
          }
          
          particle.verticalOffset *= 0.98;
        });
      }

      // New gathering behavior after 4 seconds
      let animationStartTime = Date.now();
      let isGathering = false;
      let gatheringStartTime = 0;
      const gatheringDuration = 2000;
      const waitTime = 4000;
      
      function handleGathering(currentTime) {
        const elapsed = currentTime - animationStartTime;
        
        if (elapsed > waitTime && !isGathering) {
          isGathering = true;
          gatheringStartTime = currentTime;
        }
        
        if (isGathering && (currentTime - gatheringStartTime) < gatheringDuration) {
          const gatherProgress = (currentTime - gatheringStartTime) / gatheringDuration;
          const easeInOut = gatherProgress < 0.5 
            ? 2 * gatherProgress * gatherProgress 
            : 1 - Math.pow(-2 * gatherProgress + 2, 3) / 2;
          
          const centerX = window.innerWidth / 2;
          const centerY = window.innerHeight / 2;
          
          particles.forEach(particle => {
            const dx = centerX - particle.x;
            const dy = centerY - particle.y;
            
            const gatherStrength = easeInOut * 0.05;
            particle.targetX += dx * gatherStrength;
            particle.targetY += dy * gatherStrength;
          });
        }
        
        if (isGathering && (currentTime - gatheringStartTime) >= gatheringDuration) {
          isGathering = false;
          animationStartTime = currentTime;
        }
      }

      // Optimized animation loop with enhanced visibility
      function animate(currentTime) {
        if (!isVisible) {
          animationId = requestAnimationFrame(animate);
          return;
        }
        
        if (currentTime - lastFrameTime < frameInterval) {
          animationId = requestAnimationFrame(animate);
          return;
        }
        
        const deltaTime = currentTime - lastFrameTime;
        lastFrameTime = currentTime;
        
        scrollVelocity *= 0.95;
        
        // Drift particles back to viewport when scrolling stops
        if (Math.abs(scrollVelocity) < 0.1) {
          driftToViewport();
        }
        
        // Handle gathering behavior
        handleGathering(currentTime);
        
        frameCount++;
        if (currentTime - lastPerformanceCheck > 5000) {
          const fps = frameCount / 5;
          if (fps < 25 && particles.length > 20) {
            particles.splice(0, Math.floor(particles.length * 0.05));
          }
          frameCount = 0;
          lastPerformanceCheck = currentTime;
        }
        
        ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
        const colors = getColors();
        
        const lerpFactor = Math.min(deltaTime / 16.67 * 0.08, 0.15);
        
        const visibleParticles = [];
        const connectionsToRender = [];
        
        particles.forEach((particle, i) => {
          particle.x = lerp(particle.x, particle.targetX, lerpFactor);
          particle.y = lerp(particle.y, particle.targetY, lerpFactor);
          
          const timeMultiplier = deltaTime / 16.67;
          particle.targetX += particle.vx * timeMultiplier;
          particle.targetY += particle.vy * timeMultiplier;
          
          particle.targetY += particle.verticalOffset * 0.02;
          
          if (particle.targetX < 0 || particle.targetX > window.innerWidth) {
            particle.vx *= -0.95;
            particle.targetX = Math.max(0, Math.min(window.innerWidth, particle.targetX));
          }
          if (particle.targetY < 0 || particle.targetY > window.innerHeight) {
            particle.vy *= -0.95;
            particle.targetY = Math.max(0, Math.min(window.innerHeight, particle.targetY));
            particle.verticalOffset *= 0.8;
          }
          
          particle.isVisible = isParticleVisible(particle);
          
          if (!particle.isVisible) {
            particle.lastVisible = false;
            return;
          }
          
          particle.pulse += particle.pulseSpeed * timeMultiplier;
          const currentRadius = particle.originalRadius + Math.sin(particle.pulse) * 0.4;
          
          const dx = mouseX - particle.x;
          const dy = mouseY - particle.y;
          const distance = Math.sqrt(dx * dx + dy * dy);
          
          if (distance < 90) {
            const force = (90 - distance) / 90;
            const pushX = (dx / distance) * force * 0.25 * timeMultiplier;
            const pushY = (dy / distance) * force * 0.25 * timeMultiplier;
            
            particle.targetX -= pushX;
            particle.targetY -= pushY;
            particle.isGlowing = true;
          } else if (distance > 130) {
            particle.isGlowing = Math.random() > 0.85;
          }
          
          visibleParticles.push({
            particle,
            currentRadius,
            isGlowing: particle.isGlowing,
            index: i
          });
          
          if (particle.isConnected) {
            for (let j = i + 1; j < particles.length; j++) {
              const other = particles[j];
              if (!other.isConnected || !other.isVisible) continue;
              
              const dx = particle.x - other.x;
              const dy = particle.y - other.y;
              const distance = Math.sqrt(dx * dx + dy * dy);
              
              if (distance < 140) {
                connectionsToRender.push({
                  from: particle,
                  to: other,
                  distance,
                  opacity: (140 - distance) / 140,
                  glowing: particle.isGlowing || other.isGlowing
                });
              }
            }
          }
          
          particle.lastVisible = true;
        });
        
        connectionsToRender.forEach(conn => {
          if (conn.glowing) {
            ctx.save();
            ctx.shadowColor = colors.lineGlow;
            ctx.shadowBlur = 8;
            ctx.beginPath();
            ctx.moveTo(conn.from.x, conn.from.y);
            ctx.lineTo(conn.to.x, conn.to.y);
            ctx.strokeStyle = colors.lineGlow.replace(/[\d\.]+\)/, `${0.5 * conn.opacity})`);
            ctx.lineWidth = 1.4;
            ctx.stroke();
            ctx.restore();
          }
          
          ctx.beginPath();
          ctx.moveTo(conn.from.x, conn.from.y);
          ctx.lineTo(conn.to.x, conn.to.y);
          ctx.strokeStyle = colors.line.replace(/[\d\.]+\)/, `${0.35 * conn.opacity})`);
          ctx.lineWidth = 0.8;
          ctx.stroke();
        });
        
        visibleParticles.forEach(({ particle, currentRadius, isGlowing }) => {
          if (isGlowing) {
            ctx.save();
            ctx.shadowColor = colors.particleGlow;
            ctx.shadowBlur = 12;
            ctx.beginPath();
            ctx.arc(particle.x, particle.y, currentRadius * 1.4, 0, Math.PI * 2);
            ctx.fillStyle = colors.particleGlow;
            ctx.fill();
            ctx.restore();
          }
          
          ctx.beginPath();
          ctx.arc(particle.x, particle.y, currentRadius, 0, Math.PI * 2);
          ctx.fillStyle = isGlowing ? colors.particleGlow : colors.particle;
          ctx.fill();
        });
        
        animationId = requestAnimationFrame(animate);
      }
      
      document.addEventListener('visibilitychange', () => {
        isVisible = !document.hidden;
      });
      
      let resizeTimeout;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
          resizeCanvas();
          createParticles();
        }, 150);
      });
      
      document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
      });
      
      let lastScrollTime = 0;
      window.addEventListener('scroll', () => {
        const currentTime = Date.now();
        if (currentTime - lastScrollTime > 16) {
          handleScroll();
          lastScrollTime = currentTime;
        }
      });
      
      lastScrollY = window.pageYOffset;
      
      resizeCanvas();
      createParticles();
      requestAnimationFrame(animate);
      
      console.log('Enhanced network animation started with', particles.length, 'particles and scroll-reactive movement');
      
      let themeTimeout;
      const observer = new MutationObserver(() => {
        clearTimeout(themeTimeout);
        themeTimeout = setTimeout(() => {
          cachedColors = null;
        }, 100);
      });
      observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['data-theme']
      });
      
    })();
  </script>

  <!-- Fix for menu scrollbar shift -->
  <script>
    // Function to get scrollbar width
    function getScrollbarWidth() {
      // Create temporary elements to measure scrollbar
      const outer = document.createElement('div');
      outer.style.visibility = 'hidden';
      outer.style.overflow = 'scroll';
      outer.style.msOverflowStyle = 'scrollbar';
      document.body.appendChild(outer);
      
      const inner = document.createElement('div');
      outer.appendChild(inner);
      
      const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;
      outer.parentNode.removeChild(outer);
      
      return scrollbarWidth;
    }

    // Update menu toggle functionality
    document.addEventListener('DOMContentLoaded', function() {
      const menuToggle = document.getElementById('menuToggle');
      const body = document.body;
      
      if (menuToggle) {
        menuToggle.addEventListener('click', function() {
          const isMenuOpen = body.classList.contains('no-scroll');
          
          if (!isMenuOpen) {
            // Menu is opening - prevent scroll and compensate for scrollbar
            const scrollbarWidth = getScrollbarWidth();
            const hasScrollbar = window.innerWidth > document.documentElement.clientWidth;
            
            body.classList.add('no-scroll');
            
            // Only add padding if there's actually a scrollbar
            if (hasScrollbar && scrollbarWidth > 0) {
              body.style.paddingRight = scrollbarWidth + 'px';
            }
          } else {
            // Menu is closing - restore scroll
            body.classList.remove('no-scroll');
            body.style.paddingRight = '';
          }
        });
      }
    });
  </script>
</body>
</html>